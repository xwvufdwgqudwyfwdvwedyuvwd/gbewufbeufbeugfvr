loadstring(game:HttpGet("https://raw.githubusercontent.com/xwvufdwgqudwyfwdvwedyuvwd/gbewufbeufbeugfvr/refs/heads/main/Semua"))()
loadstring(game:HttpGet("https://raw.githubusercontent.com/xwvufdwgqudwyfwdvwedyuvwd/gbewufbeufbeugfvr/refs/heads/main/update%20eifuheuehf"))()
loadstring(game:HttpGet("https://raw.githubusercontent.com/fewnbhefbevfhevfdfveh/ckhsuciceifgeufhefveyfg/refs/heads/main/Webhook%20Fish%20Gui%20dywfywgfwyfvwydgvy"))()

local repo = "https://raw.githubusercontent.com/deividcomsono/Obsidian/main/"
local Library = loadstring(game:HttpGet(repo .. "Library.lua"))()
local ThemeManager = loadstring(game:HttpGet(repo .. "addons/ThemeManager.lua"))()
local SaveManager = loadstring(game:HttpGet(repo .. "addons/SaveManager.lua"))()

local Options = Library.Options
local Toggles = Library.Toggles

Library.ForceCheckbox = false
Library.ShowToggleFrameInKeybinds = true

local Window = Library:CreateWindow({
	Title = "Nexa | Freemium",
	Footer = "Game: Fish It | Version: 1.3.1 | by Nexa Community",
	Icon = "rbxassetid://131269662643486",
	NotifySide = "Right",
	ShowCustomCursor = true,
})

local Tabs = {
    Home = Window:AddTab("Home", "house"),
	Info = Window:AddTab("Info", "info"),
	Farm = Window:AddTab("Farm", "fish"),
	Event = Window:AddTab("Event", "calendar"),
	Auto = Window:AddTab("Auto", "repeat-2"),
	Shop = Window:AddTab("Shop", "shopping-cart"),
	Boat = Window:AddTab("Boat", "sailboat"),
	Player = Window:AddTab("Player", "user"),
	Tp = Window:AddTab("Teleport", "map-pin"),
}

local LeftGroupBox = Tabs.Home:AddLeftGroupbox("Account Info", "circle-user-round")

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- Tunggu karakter muncul
local function getCharacter()
    return LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
end

local char = getCharacter()
local hrp = char:WaitForChild("HumanoidRootPart")

-- Pastikan Overhead ada
local overhead = hrp:WaitForChild("Overhead")
local header = overhead.Content.Header
local level = overhead.LevelContainer.Label

-- Tambahkan Label di WindUI
local InfoLabel = LeftGroupBox:AddLabel({
    Text = "Name: " .. header.Text .. "\n" .. level.Text,
    DoesWrap = true
})

-- Loop update setiap 1 detik
task.spawn(function()
    while task.wait(1) do
        -- Cek jika karakter respawn atau overhead hilang
        if not hrp or not hrp.Parent then
            char = getCharacter()
            hrp = char:WaitForChild("HumanoidRootPart")
            overhead = hrp:WaitForChild("Overhead")
            header = overhead.Content.Header
            level = overhead.LevelContainer.Label
        end

        InfoLabel:SetText("Name: " .. header.Text .. "\n" .. level.Text)
    end
end)


local LeftGroupBox = Tabs.Info:AddLeftGroupbox("Event Status", "compass")

-- === HUNT STATUS ===

-- Daftar props & nama hunt
local hunts = {
    ["Props 1"] = "Shark Hunt",
    ["Props 2"] = "Model", -- Worm Hunt
    ["Props 3"] = "Megalodon Hunt",
    ["Props 4"] = "Ghost Shark Hunt",
    ["Props 5"] = "Fishing Hunt",
}

-- Referensi ke menu rings
local menuRings = workspace:FindFirstChild("!!! MENU RINGS")

-- Buat label untuk status di LeftGroupbox
local huntStatusLabel = LeftGroupBox:AddLabel({
    Text = "Checking...",
    DoesWrap = true,
    Size = 16,
})

-- Fungsi update status
local function updateStatus()
    if not menuRings then return end

    local statusText = ""

    for i = 1, 5 do
        local propName = "Props " .. i
        local huntName = hunts[propName]
        local prop = menuRings:FindFirstChild(propName)
        local found = false

        if prop and huntName then
            if prop:FindFirstChild(huntName) then
                found = true
            end
        end

        -- Worm Hunt khusus (Props 2 â†’ "Model")
        if propName == "Props 2" then
            if prop and prop:FindFirstChild("Model") then
                found = true
            end
            statusText = statusText .. "Worm Hunt: " .. (found and "Spawned!" or "Not Found") .. "\n"
        else
            statusText = statusText .. hunts[propName] .. ": " .. (found and "Spawned!" or "Not Found") .. "\n"
        end
    end

    -- hapus newline terakhir
    statusText = statusText:sub(1, #statusText - 1)

    -- update teks di label
    huntStatusLabel:SetText(statusText)
end

-- update awal
updateStatus()

-- auto update kalau ada perubahan di menuRings
if menuRings then
    menuRings.ChildAdded:Connect(function(child)
        if string.match(child.Name, "Props") then
            updateStatus()
        end
    end)

    menuRings.ChildRemoved:Connect(function(child)
        if string.match(child.Name, "Props") then
            updateStatus()
        end
    end)

    for i = 1, 5 do
        local prop = menuRings:FindFirstChild("Props " .. i)
        if prop then
            prop.ChildAdded:Connect(updateStatus)
            prop.ChildRemoved:Connect(updateStatus)
        end
    end
end

-- cek & update setiap 1 detik
task.spawn(function()
    while task.wait(1) do
        updateStatus()
    end
end)

local RightGroupBox = Tabs.Info:AddRightGroupbox("Event Hunt", "anchor")

local Players = game:GetService("Players")
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local hrp = character:WaitForChild("HumanoidRootPart")

-- Variabel penyimpanan
local savePosition -- posisi awal sebelum teleport
local freezeBV, freezeBG
local selectedTargets = {} -- multi pilih
local isActive = false

-- Offset per event
local offsets = {
    ["Shark Hunt"] = Vector3.new(0, 100, 0),
    ["Worm Hunt"] = Vector3.new(0, 100, 0),
    ["Megalodon Hunt"] = Vector3.new(0, 5, 0),
    ["Ghost Shark Hunt"] = Vector3.new(0, 100, 0),
    ["Fishing Hunt"] = Vector3.new(0, 100, 0),
}

-- Target finder
local targets = {
    ["Shark Hunt"] = function()
        local menuRings = workspace:FindFirstChild("!!! MENU RINGS")
        local props = menuRings and menuRings:FindFirstChild("Props 1")
        return props and props:FindFirstChild("Shark Hunt")
    end,
    ["Worm Hunt"] = function()
        local menuRings = workspace:FindFirstChild("!!! MENU RINGS")
        local props = menuRings and menuRings:FindFirstChild("Props 2")
        return props and props:FindFirstChild("Model")
    end,
    ["Megalodon Hunt"] = function()
        local menuRings = workspace:FindFirstChild("!!! MENU RINGS")
        local props = menuRings and menuRings:FindFirstChild("Props 3")
        return props and props:FindFirstChild("Megalodon Hunt")
    end,
    ["Ghost Shark Hunt"] = function()
        local menuRings = workspace:FindFirstChild("!!! MENU RINGS")
        local props = menuRings and menuRings:FindFirstChild("Props 4")
        return props and props:FindFirstChild("Ghost Shark Hunt")
    end,
    ["Fishing Hunt"] = function()
        local menuRings = workspace:FindFirstChild("!!! MENU RINGS")
        local props = menuRings and menuRings:FindFirstChild("Props 5")
        return props and props:FindFirstChild("Fishing Hunt")
    end,
}

-- Freeze player
local function ApplyFreeze()
    if freezeBV then freezeBV:Destroy() end
    if freezeBG then freezeBG:Destroy() end

    freezeBV = Instance.new("BodyVelocity")
    freezeBV.Velocity = Vector3.new(0, 0, 0)
    freezeBV.MaxForce = Vector3.new(1e5, 1e5, 1e5)
    freezeBV.Parent = hrp

    freezeBG = Instance.new("BodyGyro")
    freezeBG.CFrame = hrp.CFrame
    freezeBG.D = 10
    freezeBG.MaxTorque = Vector3.new(1e5, 1e5, 1e5)
    freezeBG.Parent = hrp
end

local function RemoveFreeze()
    if freezeBV then freezeBV:Destroy() freezeBV = nil end
    if freezeBG then freezeBG:Destroy() freezeBG = nil end
end

-- Cari target aktif pertama dari selectedTargets
local function FindActiveTarget()
    for _, name in ipairs(selectedTargets) do
        local getTarget = targets[name]
        if getTarget then
            local model = getTarget()
            if model then
                return name, model
            end
        end
    end
    return nil, nil
end

-- Fungsi teleport loop
local function TeleportLoop()
    task.spawn(function()
        while isActive do
            local eventName, targetModel = FindActiveTarget()
            if eventName and targetModel then
                local offset = offsets[eventName] or Vector3.new(0, 10, 0)
                hrp.CFrame = targetModel:GetPivot() + offset
                ApplyFreeze()

                -- Tunggu sampai model hilang
                repeat
                    task.wait(1)
                until not isActive or not targets[eventName]() -- model hilang

                RemoveFreeze()
                if isActive and savePosition then
                    hrp.CFrame = savePosition -- kembali ke posisi awal
                end
            else
                task.wait(1) -- tunggu lagi sampai ada hunt aktif
            end
        end
    end)
end

-- Update ulang saat respawn
player.CharacterAdded:Connect(function(newChar)
    character = newChar
    hrp = character:WaitForChild("HumanoidRootPart")
    if isActive then
        task.delay(1, TeleportLoop)
    end
end)


-- Contoh pembuatan dropdown dan toggle dengan format baru


-- Dropdown multi pilihan event
local dropdown = RightGroupBox:AddDropdown("SelectedEvents", {
    Values = {
        "Shark Hunt",
        "Worm Hunt",
        "Megalodon Hunt",
        "Ghost Shark Hunt",
        "Fishing Hunt",
    },
    Default = {},
    Multi = true,
    Text = "Select Events",
})

dropdown:OnChanged(function(options)
    selectedTargets = options
end)

-- Toggle Teleport
local toggle = RightGroupBox:AddToggle("TeleportToggle", {
    Text = "Teleport To Events",
    Default = false,
})

toggle:OnChanged(function(state)
    isActive = state
    if state then
        savePosition = hrp.CFrame -- simpan posisi awal saat toggle ON
        TeleportLoop()
    else
        RemoveFreeze()
        if savePosition then
            hrp.CFrame = savePosition
        end
    end
end)


local LeftGroupBox = Tabs.Farm:AddLeftGroupbox("Fishing", "fish")

-- ====================[ Auto Fishing Legit ]==================== --

local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local FishingController = require(ReplicatedStorage.Controllers.FishingController)
local AutoFishingController = require(ReplicatedStorage.Controllers.AutoFishingController)
local Replion = require(ReplicatedStorage.Packages.Replion)

local AutoFishState = {
	IsActive = false,
	MinigameActive = false
}

local ClickSpeed = 0.0001

local function performClick()
	FishingController:RequestFishingMinigameClick()
	task.wait(ClickSpeed + math.random() * ClickSpeed)
end

local originalAutoFishingStateChanged = AutoFishingController.AutoFishingStateChanged
AutoFishingController.AutoFishingStateChanged = function(...)
	return originalAutoFishingStateChanged(true)
end

local function ensureServerAutoFishingOn()
	local replionData = Replion.Client:WaitReplion("Data")
	local currentAutoFishingState = replionData:GetExpect("AutoFishing")

	if not currentAutoFishingState then
		local Net = require(ReplicatedStorage.Packages.Net)
		local UpdateAutoFishingRemote = Net:RemoteFunction("UpdateAutoFishingState")
		pcall(function()
			UpdateAutoFishingRemote:InvokeServer(true)
		end)
	end
end

local originalRodStarted = FishingController.FishingRodStarted
local originalFishingStopped = FishingController.FishingStopped
local clickThread = nil

FishingController.FishingRodStarted = function(self, ...)
	originalRodStarted(self, ...)
	if AutoFishState.IsActive and not AutoFishState.MinigameActive then
		AutoFishState.MinigameActive = true
		if clickThread then task.cancel(clickThread) end
		clickThread = task.spawn(function()
			while AutoFishState.IsActive and AutoFishState.MinigameActive do
				performClick()
			end
		end)
	end
end

FishingController.FishingStopped = function(self, ...)
	originalFishingStopped(self, ...)
	if AutoFishState.MinigameActive then
		AutoFishState.MinigameActive = false
		task.wait(1)
		ensureServerAutoFishingOn()
	end
end

local function ToggleAutoClick(shouldActivate)
	AutoFishState.IsActive = shouldActivate
	if shouldActivate then
		ensureServerAutoFishingOn()
	else
		if clickThread then
			task.cancel(clickThread)
			clickThread = nil
		end
		AutoFishState.MinigameActive = false
	end
end

local AutoFishToggle = LeftGroupBox:AddToggle("AutoFishToggle", {
	Text = "Auto Fish Legit",
	Default = false,
	Tooltip = "Aktifkan auto fishing otomatis",
	Callback = function(Value)
		ToggleAutoClick(Value)
	end
})

AutoFishToggle:OnChanged(function(Value)
	print("Auto Fish status:", Value)
end)

local SpeedInput = LeftGroupBox:AddInput("AutoFishSpeed", {
	Text = "Click Speed",
	Default = tostring(ClickSpeed),
	Numeric = true,
	Finished = true,
	Placeholder = "Example: 0.0005",
	Tooltip = "Kecepatan klik (semakin kecil semakin cepat)",
	Callback = function(Value)
		local num = tonumber(Value)
		if num and num > 0 then
			ClickSpeed = num
		end
	end
})

-- ====================[ Fishing Counter GUI ]==================== --

local Players = game:GetService("Players")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

local smallNotif = playerGui:WaitForChild("Small Notification")
local display = smallNotif:WaitForChild("Display")
local container = display:WaitForChild("Container")

local notifications = playerGui:WaitForChild("Text Notifications")
local notifFrame = notifications:WaitForChild("Frame")

local successPos = UDim2.new(0.5, 0, 0.100000001, 0)

-- Counter
local successCount = 0
local failCount = 0

-- Reference agar bisa disable nanti
local successConnection
local failConnection
local fishingGui

-- Fungsi update label
local function updateLabel(successLabel, failLabel)
	successLabel.Text = "Success: " .. successCount
	failLabel.Text = "Failed: " .. failCount
end

-- Fungsi buat GUI
local function createFishingGui()
	local screenGui = Instance.new("ScreenGui")
	screenGui.Name = "FishingCounterGui"
	screenGui.Parent = playerGui
	screenGui.ResetOnSpawn = false

	local frame = Instance.new("Frame")
	frame.Size = UDim2.new(0, 170, 0, 70)
	frame.Position = UDim2.new(0, 15, 0, 15)
	frame.BackgroundColor3 = Color3.fromRGB(20, 20, 25)
	frame.BackgroundTransparency = 0.15
	frame.BorderSizePixel = 0
	frame.Parent = screenGui

	local corner = Instance.new("UICorner")
	corner.CornerRadius = UDim.new(0, 12)
	corner.Parent = frame

	local gradient = Instance.new("UIGradient")
	gradient.Color = ColorSequence.new({
		ColorSequenceKeypoint.new(0, Color3.fromRGB(50, 50, 60)),
		ColorSequenceKeypoint.new(1, Color3.fromRGB(15, 15, 20))
	})
	gradient.Rotation = 45
	gradient.Parent = frame

	local stroke = Instance.new("UIStroke")
	stroke.Thickness = 1.5
	stroke.Color = Color3.fromRGB(120, 120, 255)
	stroke.Transparency = 0.3
	stroke.Parent = frame

	local title = Instance.new("TextLabel")
	title.Size = UDim2.new(1, 0, 0, 22)
	title.Position = UDim2.new(0, 0, 0, 0)
	title.BackgroundTransparency = 1
	title.Text = "ðŸŽ£ Fishing Counter"
	title.Font = Enum.Font.GothamBold
	title.TextColor3 = Color3.fromRGB(200, 200, 255)
	title.TextSize = 15
	title.TextXAlignment = Enum.TextXAlignment.Center
	title.Parent = frame

	local successLabel = Instance.new("TextLabel")
	successLabel.Size = UDim2.new(1, -10, 0, 20)
	successLabel.Position = UDim2.new(0, 5, 0, 28)
	successLabel.BackgroundTransparency = 1
	successLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
	successLabel.Font = Enum.Font.GothamMedium
	successLabel.TextSize = 14
	successLabel.Text = "Success: 0"
	successLabel.TextXAlignment = Enum.TextXAlignment.Left
	successLabel.Parent = frame

	local failLabel = Instance.new("TextLabel")
	failLabel.Size = UDim2.new(1, -10, 0, 20)
	failLabel.Position = UDim2.new(0, 5, 0, 48)
	failLabel.BackgroundTransparency = 1
	failLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
	failLabel.Font = Enum.Font.GothamMedium
	failLabel.TextSize = 14
	failLabel.Text = "Failed: 0"
	failLabel.TextXAlignment = Enum.TextXAlignment.Left
	failLabel.Parent = frame

	-- Connect events
	successConnection = container:GetPropertyChangedSignal("Position"):Connect(function()
		if container.Position == successPos then
			successCount += 1
			updateLabel(successLabel, failLabel)
		end
	end)

	failConnection = notifFrame.ChildAdded:Connect(function(child)
		if child.Name == "TextTile" then
			local header = child:WaitForChild("Header", 5)
			if header and header:IsA("TextLabel") then
				if header.Text == "The fish got away!" then
					failCount += 1
					updateLabel(successLabel, failLabel)
				end
				header:GetPropertyChangedSignal("Text"):Connect(function()
					if header.Text == "The fish got away!" then
						failCount += 1
						updateLabel(successLabel, failLabel)
					end
				end)
			end
		end
	end)

	return screenGui
end

-- Fungsi aktif/nonaktif GUI
local function toggleFishingCounter(enabled)
	if enabled then
		if not fishingGui then
			fishingGui = createFishingGui()
		end
	else
		if successConnection then
			successConnection:Disconnect()
			successConnection = nil
		end
		if failConnection then
			failConnection:Disconnect()
			failConnection = nil
		end
		if fishingGui then
			fishingGui:Destroy()
			fishingGui = nil
		end
	end
end

--------------------------------------------------------
-- ðŸŸ¢ Toggle versi baru
--------------------------------------------------------

LeftGroupBox:AddToggle("FishingCounterToggle", {
	Text = "Show Fishing Counter",
	Default = false,
})

Toggles.FishingCounterToggle:OnChanged(function(state)
	toggleFishingCounter(state)
end)

-- ====================[ Cancel Fishing Button ]==================== --

local ReplicatedStorage = game:GetService("ReplicatedStorage")

local CancelFishing = ReplicatedStorage
    :WaitForChild("Packages")
    :WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0")
    :WaitForChild("net")
    :WaitForChild("RF/CancelFishingInputs")

LeftGroupBox:AddButton({
    Text = "Cancel Fishing",
    Func = function()
        CancelFishing:InvokeServer()
    end
})


-- ====================[ Auto Equip Rod ]==================== --

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- Remote events
local Net = ReplicatedStorage:WaitForChild("Packages")
    :WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0")
    :WaitForChild("net")

local EquipRemote = Net:WaitForChild("RE/EquipToolFromHotbar")
local UnequipRemote = Net:WaitForChild("RE/UnequipToolFromHotbar")

local equipLoop = nil

-- ðŸŸ¢ Toggle Baru (Obsidian)
LeftGroupBox:AddToggle("AutoEquipRodToggle", {
	Text = "Auto Equip Rod",
	Default = false,
	Tooltip = "Automatically equips your fishing rod (slot 1) and unequips it when turned off",
	Callback = function(state)
		local char = workspace:WaitForChild("Characters"):WaitForChild(LocalPlayer.Name)

		if state then
			-- Jalankan loop auto equip
			equipLoop = task.spawn(function()
				while task.wait(1) do
					if not char:FindFirstChild("!!!FISHING_VIEW_MODEL!!!") then
						pcall(function()
							EquipRemote:FireServer(1)
						end)
					end
				end
			end)
		else
			-- Hentikan loop & unequip rod
			if equipLoop then
				task.cancel(equipLoop)
				equipLoop = nil
			end
			pcall(function()
				UnequipRemote:FireServer()
			end)
		end
	end
})

local RightGroupBox = Tabs.Farm:AddRightGroupbox("Sell", "landmark")

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local sellRemote = ReplicatedStorage:WaitForChild("Packages")
    :WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0")
    :WaitForChild("net")
    :WaitForChild("RF/SellAllItems")

local autoSell = false
local sellDelay = 2
local mode = "Sell Delay"
local autoSellLoop = nil

-- ðŸŸ£ Slider (Mengikuti format yang kamu minta)
RightGroupBox:AddSlider("SellDelaySlider", {
    Text = "Sell Delay (seconds)",
    Default = 2,
    Min = 1,
    Max = 30,
    Rounding = 0,
    Callback = function(value)
        sellDelay = value
    end,
})

-- ðŸŸ¢ Dropdown
RightGroupBox:AddDropdown("SellModeDropdown", {
    Values = { "Backpack Full", "Sell Delay" },
    Default = "Sell Delay",
    Multi = false,
    Text = "Select Mode",
    AllowNull = false,
    Searchable = false,
    MaxVisibleDropdownItems = 5,
    Callback = function(option)
        mode = option
    end,
})

-- ðŸ”µ Toggle
RightGroupBox:AddToggle("AutoSellToggle", {
    Text = "Auto Sell All Items",
    Default = false,
    Callback = function(state)
        autoSell = state

        if state then
            autoSellLoop = task.spawn(function()
                while autoSell do
                    pcall(function()
                        if mode == "Sell Delay" then
                            sellRemote:InvokeServer()
                            task.wait(sellDelay)
                        elseif mode == "Backpack Full" then
                            local bagLabel = LocalPlayer
                                .PlayerGui
                                .Inventory
                                .Main
                                .Top
                                .Options
                                .Fish
                                .Label
                                .BagSize

                            if bagLabel and bagLabel.Text == "5,000/5,000" then
                                sellRemote:InvokeServer()
                            end
                            task.wait(1)
                        end
                    end)
                end
            end)
        else
            if autoSellLoop then
                task.cancel(autoSellLoop)
                autoSellLoop = nil
            end
        end
    end,
})

local LeftGroupBox = Tabs.Event:AddLeftGroupbox("Halloween", "candy")

local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- ðŸ”— Remote references
local Net = ReplicatedStorage:WaitForChild("Packages")
    :WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0")
    :WaitForChild("net")

local ClaimReward = Net:WaitForChild("RE/ClaimEventReward")
local SpecialDialogueEvent = Net:WaitForChild("RF/SpecialDialogueEvent")

local autoClaim = false
local autoClaimLoop = nil

-- ðŸŸ£ Toggle Baru (Obsidian)
LeftGroupBox:AddToggle("AutoClaimRewardToggle", {
	Text = "Auto Claim All Rewards",
	Default = false,
	Tooltip = "Automatically claims all available event rewards",
	Callback = function(state)
		autoClaim = state

        if state then
            autoClaimLoop = task.spawn(function()
                while autoClaim do
                    for i = 1, 13 do
                        pcall(function()
                            ClaimReward:FireServer(i)
                        end)
                        task.wait(0.1)
                    end
                    task.wait(1)
                end
            end)
        else
            if autoClaimLoop then
                task.cancel(autoClaimLoop)
                autoClaimLoop = nil
            end
        end
	end,
})

LeftGroupBox:AddButton({
    Text = "Auto TrickOrTreat",
    Func = function()
        local ReplicatedStorage = game:GetService("ReplicatedStorage")
        local Net = ReplicatedStorage.Packages._Index["sleitnick_net@0.2.0"].net
        local RF = Net:WaitForChild("RF/SpecialDialogueEvent")
        local NPCFolder = ReplicatedStorage:WaitForChild("NPC")
        local NPCs = NPCFolder:GetChildren()
        local eventType = "TrickOrTreat"

        task.spawn(function()
            for i, npc in ipairs(NPCs) do
                task.wait(0.01)
                pcall(function()
                    RF:InvokeServer(npc.Name, eventType)
                end)

                if i == #NPCs then
                    Library:Notify({
                        Title = "Auto TrickOrTreat",
                        Description = "All NPCs are done!",
                        Time = 4,
                    })
                    break
                end
            end
        end)
    end
})

local LeftGroupBox = Tabs.Auto:AddLeftGroupbox("Deep Sea Status", "ghost")

-- === DEEP SEA QUEST ===
local board = workspace["!!! MENU RINGS"]["Deep Sea Tracker"].Board
local surfaceGui = board:WaitForChild("Gui")
local content = surfaceGui:WaitForChild("Content")
local labelNames = {"Label1", "Label2", "Label3", "Label4"}

-- Buat Label utama di LeftGroupBox
local deepSeaLabel = LeftGroupBox:AddLabel({
    Text = "Checking...",
    DoesWrap = true,
    Size = 14
})

-- Fungsi untuk update isi label
local function updateDeepSea()
    local lines = {}
    for _, name in ipairs(labelNames) do
        local label = content:FindFirstChild(name)
        if label then
            table.insert(lines, label.Text)
        end
    end

    -- Gabungkan semua teks jadi satu string (dipisah newline)
    local newText = table.concat(lines, "\n")

    -- Update teks label
    deepSeaLabel:SetText(newText)
end

-- Jalankan pertama kali
updateDeepSea()

-- Deteksi perubahan teks pada setiap label
for _, name in ipairs(labelNames) do
    local label = content:FindFirstChild(name)
    if label then
        label:GetPropertyChangedSignal("Text"):Connect(updateDeepSea)
    end
end

local LeftGroupBox = Tabs.Auto:AddLeftGroupbox("Aura Boat Status", "kayak")

-- === AURA BOAT QUEST ===
-- Buat label utama di LeftGroupBox
local auraLabel = LeftGroupBox:AddLabel({
    Text = "Checking...",
    DoesWrap = true,
    Size = 14
})

-- Fungsi untuk update teks Aura Boat
local function updateAura()
    local contentAura = workspace["!!! MENU RINGS"]["Aura Tracker"].Board.Gui.Content

    -- Gabungkan semua teks label dari board
    local combinedText = table.concat({
        contentAura.Label1.Text,
        contentAura.Label2.Text,
        contentAura.Label3.Text
    }, "\n")

    -- Update teks label di GUI
    auraLabel:SetText(combinedText)
end

-- Jalankan loop update otomatis
task.spawn(function()
    while task.wait(1) do
        updateAura()
    end
end)


local LeftGroupBox = Tabs.Auto:AddLeftGroupbox("Element Status", "atom")

-- === ELEMENT QUEST ===
local board = workspace["!!! MENU RINGS"]["Element Tracker"].Board
local surfaceGui = board:WaitForChild("Gui")
local content = surfaceGui:WaitForChild("Content")
local labelNames = {"Label1", "Label2", "Label3", "Label4"}

-- Buat label di LeftGroupbox
local elementLabel = LeftGroupBox:AddLabel({
    Text = "Checking...",
    DoesWrap = true,
    Size = 14
})

-- Fungsi untuk update isi label
local function updateElement()
    local lines = {}
    for _, name in ipairs(labelNames) do
        local label = content:FindFirstChild(name)
        if label then
            table.insert(lines, label.Text)
        end
    end

    -- Gabungkan semua teks jadi satu string
    elementLabel:SetText(table.concat(lines, "\n"))
end

-- Update pertama kali
updateElement()

-- Update otomatis kalau teks pada board berubah
for _, name in ipairs(labelNames) do
    local label = content:FindFirstChild(name)
    if label then
        label:GetPropertyChangedSignal("Text"):Connect(updateElement)
    end
end

local LeftGroupBox = Tabs.Auto:AddLeftGroupbox("TempleLever Status", "toggle-right")

-- === TEMPLE LEVER STATUS ===
local Jungle = workspace:WaitForChild("JUNGLE INTERACTIONS")

local Steps = {
    "TempleLever 1",
    "TempleLever 2",
    "TempleLever 3",
    "TempleLever 4",
}

-- Label untuk detail status lever
local statusLabel = LeftGroupBox:AddLabel({
    Text = "Checking...",
    DoesWrap = true,
    Size = 14
})

-- Fungsi untuk update status lever
local function updateStatus()
    local lines = {}

    for _, name in ipairs(Steps) do
        local lever = Jungle:FindFirstChild(name)
        local mark = "0%"

        if lever and lever:FindFirstChild("RootPart") then
            local root = lever.RootPart
            -- Jika ProximityPrompt hilang â†’ lever sudah diaktifkan
            if not root:FindFirstChild("ProximityPrompt") then
                mark = "100%"
            end
        end

        table.insert(lines, string.format("%s: %s", name, mark))
    end

    -- Gabungkan semua status ke label
    statusLabel:SetText(table.concat(lines, "\n"))
end

-- Jalankan pembaruan tiap 1 detik (aman dengan pcall)
task.spawn(function()
    while task.wait(1) do
        pcall(updateStatus)
    end
end)

local RightGroupBox = Tabs.Auto:AddRightGroupbox("Auto Quest", "crosshair")

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

-- Konfigurasi Quest
local Quests = {
    ["Deep Sea"] = {
        Label = workspace["!!! MENU RINGS"]["Deep Sea Tracker"].Board.Gui.Content:WaitForChild("Label1"),
        PosBelum100 = CFrame.new(-3563.65063, -279.074219, -1605.75671),
        PosSudah100 = CFrame.new(-3698.01001, -135.073914, -1010.34033)
    },
    ["Element"] = {
        Label = workspace["!!! MENU RINGS"]["Element Tracker"].Board.Gui.Content:WaitForChild("Label2"),
        PosBelum100 = CFrame.new(1482.32007, 11.143092, -302.042816),
        PosSudah100 = CFrame.new(1524.70227, 5.12503767, -634.379639)
    },
    ["Aura Boat"] = {
        PosTarget = CFrame.new(88.2434769, 9.53157043, 2685.2605),
        MinLevel = 200
    },
    ["Temple Lever"] = {
        Steps = {
            { Name = "TempleLever 1", CFrame = CFrame.new(1837.76038, 6.46929169, -289.37793) },
            { Name = "TempleLever 2", CFrame = CFrame.new(1407.78601, 6.59558344, 118.577896) },
            { Name = "TempleLever 3", CFrame = CFrame.new(877.883911, 4.8866396, -358.809021) },
            { Name = "TempleLever 4", CFrame = CFrame.new(1837.76038, 6.46929169, -289.37793) },
        }
    }
}

local selectedQuest = "Deep Sea"
local autoQuestEnabled = false
local freezeBV, freezeBG
local savedCFrame

-- Freeze / Unfreeze
local function Freeze(char, cf)
    local hrp = char:FindFirstChild("HumanoidRootPart")
    if not hrp then return end

    if freezeBV then freezeBV:Destroy() freezeBV = nil end
    if freezeBG then freezeBG:Destroy() freezeBG = nil end

    freezeBV = Instance.new("BodyVelocity")
    freezeBV.Velocity = Vector3.zero
    freezeBV.MaxForce = Vector3.new(9e9, 9e9, 9e9)
    freezeBV.Parent = hrp

    freezeBG = Instance.new("BodyGyro")
    freezeBG.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
    freezeBG.CFrame = cf or hrp.CFrame
    freezeBG.Parent = hrp
end

local function Unfreeze()
    if freezeBV then freezeBV:Destroy() freezeBV = nil end
    if freezeBG then freezeBG:Destroy() freezeBG = nil end
end

-- Teleport utama
local function TeleportOnce(cf)
    local char = LocalPlayer.Character
    if char and char:FindFirstChild("HumanoidRootPart") then
        char:SetPrimaryPartCFrame(cf)
        savedCFrame = cf
        Freeze(char, cf)
    end
end

-- Temple Lever Quest Logic
local function RunTempleLever()
    task.spawn(function()
        local Jungle = workspace:WaitForChild("JUNGLE INTERACTIONS")
        local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
        local hrp = char:WaitForChild("HumanoidRootPart")
        local steps = Quests["Temple Lever"].Steps

        for _, step in ipairs(steps) do
            if not autoQuestEnabled or selectedQuest ~= "Temple Lever" then break end
            local lever = Jungle:FindFirstChild(step.Name)

            if lever and lever:FindFirstChild("RootPart") then
                hrp.CFrame = step.CFrame
                task.wait(0.5)
                local prompt = lever.RootPart:FindFirstChild("ProximityPrompt")
                if prompt then
                    fireproximityprompt(prompt)
                    task.wait(5)
                end
            end
            task.wait(1)
        end
    end)
end

-- Cek quest utama
local function CheckQuest()
    if not autoQuestEnabled or not selectedQuest then return end

    local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    local hrp = char:WaitForChild("HumanoidRootPart")

    if selectedQuest == "Aura Boat" then
        local overhead = hrp:WaitForChild("Overhead")
        local levelLabel = overhead:WaitForChild("LevelContainer"):WaitForChild("Label")
        local level = tonumber(levelLabel.Text:match("%d+")) or 0
        if level >= Quests["Aura Boat"].MinLevel then
            TeleportOnce(Quests["Aura Boat"].PosTarget)
        end

    elseif selectedQuest == "Temple Lever" then
        RunTempleLever()

    else
        local quest = Quests[selectedQuest]
        local text = quest.Label.Text
        local persen = tonumber(text:match("(%d+)%%"))
        if persen and persen < 100 then
            TeleportOnce(quest.PosBelum100)
        else
            TeleportOnce(quest.PosSudah100)
        end
    end
end

-- Update saat label berubah
for name, quest in pairs(Quests) do
    if quest.Label then
        quest.Label:GetPropertyChangedSignal("Text"):Connect(function()
            if selectedQuest == name and autoQuestEnabled then
                CheckQuest()
            end
        end)
    end
end

-- Anti geser
RunService.Heartbeat:Connect(function()
    if autoQuestEnabled and savedCFrame then
        local char = LocalPlayer.Character
        if char and char:FindFirstChild("HumanoidRootPart") then
            local hrp = char.HumanoidRootPart
            if (hrp.Position - savedCFrame.Position).Magnitude > 2 then
                hrp.CFrame = savedCFrame
            end
        end
    end
end)

-- ðŸŸ¢ Dropdown tunggal untuk semua quest
RightGroupBox:AddDropdown("QuestDropdown", {
    Values = { "Deep Sea", "Element", "Aura Boat", "Temple Lever" },
    Default = "Deep Sea",
    Multi = false,
    Text = "Select Quest",
})

Options.QuestDropdown:OnChanged(function(option)
    selectedQuest = option
    if autoQuestEnabled then
        CheckQuest()
    end
end)

-- ðŸŸ¢ Toggle Auto Quest
RightGroupBox:AddToggle("AutoQuestToggle", {
	Text = "Auto Quest",
	Default = false,
})
  
Toggles.AutoQuestToggle:OnChanged(function(state)
    autoQuestEnabled = state
    if state then
        CheckQuest()
    else
        Unfreeze()
        savedCFrame = nil
    end
end)

local LeftGroupBox = Tabs.Shop:AddLeftGroupbox("Rod Purchaser", "fish-symbol")

local rodMap = {
	["Starter Rod"] = 1,
	["Luck Rod"] = 79,
	["Carbon Rod"] = 76,
	["Grass Rod"] = 85,
	["Demascus Rod"] = 77,
	["Ice Rod"] = 78,
	["Lucky Rod"] = 4,
	["Midnight Rod"] = 80,
	["Steampunk Rod"] = 6,
	["Chrome Rod"] = 7,
	["Fluorescent Rod"] = 255,
	["Astral Rod"] = 5,
	["Angler Rod"] = 168,
	["Ares Rod"] = 126,
	["Bamboo Rod"] = 258,
}

local selectedRods = {}
local autoBuyRods = false

-- Dropdown manual (lebih aman dan stabil)
LeftGroupBox:AddDropdown("SelectRods", {
    Values = {
        "Starter Rod", "Luck Rod", "Carbon Rod", "Grass Rod",
        "Demascus Rod", "Ice Rod", "Lucky Rod", "Midnight Rod",
        "Steampunk Rod", "Chrome Rod", "Fluorescent Rod", "Astral Rod",
        "Angler Rod", "Ares Rod", "Bamboo Rod"
    },
    Default = {},
    Multi = true,
    Text = "Select Rods to Purchase",
    Searchable = true,
    Callback = function(values)
        selectedRods = {}

        -- fix format dropdown multi
        for key, value in pairs(values) do
            if typeof(key) == "string" and value == true then
                table.insert(selectedRods, rodMap[key])
            elseif typeof(value) == "string" then
                table.insert(selectedRods, rodMap[value])
            end
        end

        print("Selected Rod IDs:", table.concat(selectedRods, ", "))
    end
})

-- Tombol manual pembelian
LeftGroupBox:AddButton({
    Text = "Purchase Selected Rods",
    Func = function()
        if #selectedRods == 0 then
            Library:Notify({
                Title = "Purchase Failed",
                Description = "Please select at least one rod first.",
                Time = 4,
            })
            return
        end

        local remote = game:GetService("ReplicatedStorage")
            :WaitForChild("Packages")
            :WaitForChild("_Index")
            :WaitForChild("sleitnick_net@0.2.0")
            :WaitForChild("net")
            :WaitForChild("RF/PurchaseFishingRod")

        local successCount = 0
        for _, id in ipairs(selectedRods) do
            local success = pcall(function()
                remote:InvokeServer(id)
            end)
            if success then
                successCount += 1
            end
        end

        Library:Notify({
            Title = "Purchase Complete",
            Description = "Successfully purchased " .. successCount .. " rods.",
            Time = 4,
        })
    end
})

-- Toggle auto-purchase loop
LeftGroupBox:AddToggle("AutoBuyRodToggle", {
    Text = "Auto Purchase Loop",
    Default = false,
})

-- Toggle event
Toggles.AutoBuyRodToggle:OnChanged(function(state)
    autoBuyRods = state

    if state then
        Library:Notify({
            Title = "Auto Purchase Enabled",
            Description = "Loop started â€” automatically buying selected rods.",
            Time = 4,
        })

        task.spawn(function()
            while autoBuyRods do
                if #selectedRods > 0 then
                    local remote = game:GetService("ReplicatedStorage")
                        :WaitForChild("Packages")
                        :WaitForChild("_Index")
                        :WaitForChild("sleitnick_net@0.2.0")
                        :WaitForChild("net")
                        :WaitForChild("RF/PurchaseFishingRod")

                    for _, id in ipairs(selectedRods) do
                        pcall(function()
                            remote:InvokeServer(id)
                        end)
                    end
                end
                task.wait(5) -- delay antar pembelian
            end
        end)
    else
        Library:Notify({
            Title = "Auto Purchase Disabled",
            Description = "Loop stopped.",
            Time = 4,
        })
    end
end)


local RightGroupBox = Tabs.Shop:AddRightGroupbox("Bait Purchaser", "shrimp")

local BaitID = {
    ["Topwater Bait"] = 10,
    ["Luck Bait"] = 2,
    ["Midnight Bait"] = 3,
    ["Nature Bait"] = 17,
    ["Chroma Bait"] = 6,
    ["Dark Matter Bait"] = 8,
    ["Corrupt Bait"] = 15,
    ["Aether Bait"] = 16,
    ["Floral Bait"] = 20,
}

local selectedBaits = {}
local autoBuyBait = false


-- Dropdown manual (tanpa baitNames)
RightGroupBox:AddDropdown("SelectBaits", {
    Values = { 
        "Topwater Bait", 
        "Luck Bait", 
        "Midnight Bait", 
        "Nature Bait", 
        "Chroma Bait", 
        "Dark Matter Bait", 
        "Corrupt Bait", 
        "Aether Bait", 
        "Floral Bait" 
    },
    Default = {},
    Multi = true,
    Text = "Select Baits to Purchase",
    Searchable = true,
    Callback = function(values)
        selectedBaits = {}

        -- fix format dropdown multi (array/dictionary)
        for key, value in pairs(values) do
            if typeof(key) == "string" and value == true then
                table.insert(selectedBaits, BaitID[key])
            elseif typeof(value) == "string" then
                table.insert(selectedBaits, BaitID[value])
            end
        end

        print("Selected Bait IDs:", table.concat(selectedBaits, ", "))
    end
})

-- Tombol pembelian manual
RightGroupBox:AddButton({
    Text = "Purchase Selected Baits",
    Func = function()
        if #selectedBaits == 0 then
            Library:Notify({
                Title = "Purchase Failed",
                Description = "Please select at least one bait first.",
                Time = 4,
            })
            return
        end

        local remote = game:GetService("ReplicatedStorage")
            :WaitForChild("Packages")
            :WaitForChild("_Index")
            :WaitForChild("sleitnick_net@0.2.0")
            :WaitForChild("net")
            :WaitForChild("RF/PurchaseBait")

        local successCount = 0
        for _, id in ipairs(selectedBaits) do
            local success = pcall(function()
                remote:InvokeServer(id)
            end)
            if success then
                successCount += 1
            end
        end

        Library:Notify({
            Title = "Purchase Complete",
            Description = "Successfully purchased " .. successCount .. " baits.",
            Time = 4,
        })
    end
})

-- Toggle auto purchase loop
RightGroupBox:AddToggle("AutoBuyBaitToggle", {
    Text = "Auto Purchase Loop",
    Default = false,
})

-- Event toggle
Toggles.AutoBuyBaitToggle:OnChanged(function(state)
    autoBuyBait = state

    if state then
        Library:Notify({
            Title = "Auto Purchase Enabled",
            Description = "Loop started â€” automatically buying selected baits.",
            Time = 4,
        })

        task.spawn(function()
            while autoBuyBait do
                if #selectedBaits > 0 then
                    local remote = game:GetService("ReplicatedStorage")
                        :WaitForChild("Packages")
                        :WaitForChild("_Index")
                        :WaitForChild("sleitnick_net@0.2.0")
                        :WaitForChild("net")
                        :WaitForChild("RF/PurchaseBait")

                    for _, id in ipairs(selectedBaits) do
                        pcall(function()
                            remote:InvokeServer(id)
                        end)
                    end
                end
                task.wait(5) -- jeda antar pembelian
            end
        end)
    else
        Library:Notify({
            Title = "Auto Purchase Disabled",
            Description = "Loop stopped.",
            Time = 4,
        })
    end
end)

local LeftGroupBox = Tabs.Shop:AddLeftGroupbox("Weather Purchaser", "cloud")

local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- RemoteEvent untuk beli weather
local PurchaseWeather = ReplicatedStorage
    :WaitForChild("Packages")
    :WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0")
    :WaitForChild("net")
    :WaitForChild("RF/PurchaseWeatherEvent")

-- Table untuk simpan pilihan user
local selectedWeathers = {}
local autoPurchase = false

-- Dropdown multi-select weather list
LeftGroupBox:AddDropdown("SelectWeather", {
    Values = { "Snow", "Wind", "Cloudy", "Storm", "Radiant", "Shark Hunt" },
    Default = {},
    Multi = true,
    Text = "Select Weather Events",
    Searchable = true,
    Callback = function(values)
        selectedWeathers = {}

        -- Support format multi dropdown
        for key, value in pairs(values) do
            if typeof(key) == "string" and value == true then
                table.insert(selectedWeathers, key)
            elseif typeof(value) == "string" then
                table.insert(selectedWeathers, value)
            end
        end

        print("Selected Weathers:", table.concat(selectedWeathers, ", "))
    end
})

-- Tombol beli manual
LeftGroupBox:AddButton({
    Text = "Purchase Selected Weather",
    Func = function()
        if #selectedWeathers == 0 then
            Library:Notify({
                Title = "Purchase Failed",
                Description = "Please select at least one weather first.",
                Time = 4,
            })
            return
        end

        local successCount = 0
        for _, weather in ipairs(selectedWeathers) do
            local success, err = pcall(function()
                PurchaseWeather:InvokeServer(weather)
            end)
            if success then
                successCount += 1
            else
                warn("Failed to purchase weather:", weather, err)
            end
        end

        Library:Notify({
            Title = "Purchase Complete",
            Description = "Successfully purchased " .. successCount .. " weather(s).",
            Time = 4,
        })
    end
})

-- Toggle auto purchase loop
LeftGroupBox:AddToggle("AutoWeatherPurchaseToggle", {
    Text = "Auto Purchase Weather",
    Default = false,
})

Toggles.AutoWeatherPurchaseToggle:OnChanged(function(state)
    autoPurchase = state

    if state then
        Library:Notify({
            Title = "Auto Purchase Enabled",
            Description = "Loop started â€” automatically buying selected weathers.",
            Time = 4,
        })

        task.spawn(function()
            while autoPurchase do
                if #selectedWeathers > 0 then
                    for _, weather in ipairs(selectedWeathers) do
                        pcall(function()
                            PurchaseWeather:InvokeServer(weather)
                        end)
                        task.wait(0.3)
                    end
                end
                task.wait(1.5) -- jeda antar loop
            end
        end)
    else
        Library:Notify({
            Title = "Auto Purchase Disabled",
            Description = "Loop stopped.",
            Time = 4,
        })
    end
end)

local RightGroupBox = Tabs.Shop:AddRightGroupbox("Boat Purchaser", "sailboat")

local ReplicatedStorage = game:GetService("ReplicatedStorage")

local PurchaseBoat = ReplicatedStorage
    :WaitForChild("Packages")
    :WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0")
    :WaitForChild("net")
    :WaitForChild("RF/PurchaseBoat")

-- Daftar Boat (manual, bisa kamu ubah urutannya sesuka hati)
local BoatList = {
    ["Small Boat"] = 1,
    ["Kayak"] = 2,
    ["Jetski"] = 3,
    ["Highfield Boat"] = 4,
    ["Speed Boat"] = 5,
    ["Fishing Boat"] = 6,
    ["Mini Yacht"] = 14,
    ["Mini Hoverboat"] = 15,
    ["Hyper Boat"] = 7,
}

local selectedBoatID = nil
local autoBuyBoat = false

-- Dropdown manual (tanpa BoatNames)
RightGroupBox:AddDropdown("SelectBoat", {
    Values = {
        "Small Boat",
        "Kayak",
        "Jetski",
        "Highfield Boat",
        "Speed Boat",
        "Fishing Boat",
        "Mini Yacht",
        "Mini Hoverboat",
        "Hyper Boat"
    },
    Default = {},
    Multi = false,
    Text = "Select Boat to Purchase",
    Callback = function(option)
        selectedBoatID = BoatList[option]
        print("Selected Boat:", option, "ID:", selectedBoatID)
    end
})

-- Tombol pembelian manual
RightGroupBox:AddButton({
    Text = "Purchase Selected Boat",
    Func = function()
        if not selectedBoatID then
            Library:Notify({
                Title = "Purchase Failed",
                Description = "Please select a boat first.",
                Time = 4,
            })
            return
        end

        local success, result = pcall(function()
            return PurchaseBoat:InvokeServer(selectedBoatID)
        end)

        if success then
            Library:Notify({
                Title = "Boat Purchased",
                Description = "Successfully purchased boat ID: " .. tostring(selectedBoatID),
                Time = 4,
            })
        else
            Library:Notify({
                Title = "Purchase Failed",
                Description = tostring(result),
                Time = 4,
            })
        end
    end
})

-- Toggle auto-purchase loop
RightGroupBox:AddToggle("AutoBuyBoatToggle", {
    Text = "Auto Purchase Loop",
    Default = false,
})

-- Event toggle
Toggles.AutoBuyBoatToggle:OnChanged(function(state)
    autoBuyBoat = state

    if state then
        Library:Notify({
            Title = "Auto Purchase Enabled",
            Description = "Loop started â€” automatically buying selected boat.",
            Time = 4,
        })

        task.spawn(function()
            while autoBuyBoat do
                if selectedBoatID then
                    pcall(function()
                        PurchaseBoat:InvokeServer(selectedBoatID)
                    end)
                end
                task.wait(5)
            end
        end)
    else
        Library:Notify({
            Title = "Auto Purchase Disabled",
            Description = "Loop stopped.",
            Time = 4,
        })
    end
end)

local LeftGroupBox = Tabs.Boat:AddLeftGroupbox("Spawn Boat", "ship")

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local SpawnBoat = ReplicatedStorage
    :WaitForChild("Packages")
    :WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0")
    :WaitForChild("net")
    :WaitForChild("RF/SpawnBoat")

-- Daftar Boat
local BoatList = {
    ["Small Boat"] = 1,
    ["Kayak"] = 2,
    ["Jetski"] = 3,
    ["Highfield Boat"] = 4,
    ["Speed Boat"] = 5,
    ["Fishing Boat"] = 6,
    ["Mini Yacht"] = 14,
    ["Mini Hoverboat"] = 15,
    ["Hyper Boat"] = 7,
    ["Dinky Fishing Boat"] = 20,
    ["Aura Boat"] = 17,
    ["Burger Boat"] = 18,
    ["Mega Hovercraft"] = 19,
    ["Froen Boat"] = 11,
    ["Cruiser Boat"] = 13,
    ["Rubber Ducky"] = 16,
}

-- Convert ke nama boat untuk dropdown
local BoatNames = {}
for name,_ in pairs(BoatList) do
    table.insert(BoatNames, name)
end
table.sort(BoatNames)

-- Default pilihan
local selectedBoatID = BoatList[BoatNames[1]]

-- Dropdown Pilih Boat
LeftGroupBox:AddDropdown("SelectBoatDropdown", {
    Values = BoatNames,
    Default = BoatNames[1],
    Multi = false,
    Text = "Select Boat to Spawn",
    Searchable = true,
    Callback = function(option)
        selectedBoatID = BoatList[option]
        print("Selected Boat to Spawn:", option, "ID:", selectedBoatID)
    end
})

-- Button Spawn Boat
LeftGroupBox:AddButton({
    Text = "Spawn Boat",
    Func = function()
        local args = {selectedBoatID}
        local success, result = pcall(function()
            return SpawnBoat:InvokeServer(unpack(args))
        end)

        if success then
            Library:Notify({
                Title = "Boat Spawned",
                Description = "Spawned Boat: " .. tostring(result),
                Time = 4,
            })
        else
            Library:Notify({
                Title = "Spawn Failed",
                Description = tostring(result),
                Time = 4,
            })
        end
    end
})

local RightGroupBox = Tabs.Boat:AddRightGroupbox("Speed Boat", "gauge")

-- Input untuk set kecepatan
local customSpeed = 1000

RightGroupBox:AddInput("BoatSpeedInput", {
    Text = "Set Boat Speed",
    Default = "1000",
    Placeholder = "Example: 1000",
    Callback = function(value)
        local number = tonumber(value)
        if number then
            customSpeed = number
        end
    end
})

-- Toggle untuk Super Speed
RightGroupBox:AddToggle("SuperSpeedToggle", {
    Text = "Super Speed Boats",
    Default = false,
})

Toggles.SuperSpeedToggle:OnChanged(function(state)
    local BoatsModule = require(ReplicatedStorage.Shared.BoatsHandlingData)

    if not BoatsModule._OriginalSpeed then
        BoatsModule._OriginalSpeed = {}
        for boatName, boatData in pairs(BoatsModule) do
            if type(boatData) == "table" and boatData.Speed then
                BoatsModule._OriginalSpeed[boatName] = boatData.Speed
            end
        end
    end

    if state then
        for _, boatData in pairs(BoatsModule) do
            if type(boatData) == "table" and boatData.Speed then
                boatData.Speed = customSpeed
            end
        end
        Library:Notify({
            Title = "Super Speed Activated",
            Description = "All boats now move at "..customSpeed.." speed!",
            Time = 3,
        })
    else
        for boatName, boatData in pairs(BoatsModule) do
            if type(boatData) == "table" and boatData.Speed and BoatsModule._OriginalSpeed[boatName] then
                boatData.Speed = BoatsModule._OriginalSpeed[boatName]
            end
        end
        Library:Notify({
            Title = "Super Speed Disabled",
            Description = "Boats restored to normal speed.",
            Time = 3,
        })
    end
end)

local LeftGroupBox = Tabs.Player:AddLeftGroupbox("LocalPlayer", "user")

-- Bypass Oxygen Tank Toggle
LeftGroupBox:AddToggle("BypassOxygenTank", {
    Text = "Bypass Oxygen Tank",
    Default = false,
})
Toggles.BypassOxygenTank:OnChanged(function(state)
    local RepStorage = game:GetService("ReplicatedStorage")
    local Net = RepStorage:WaitForChild("Packages")
                    :WaitForChild("_Index")
                    :WaitForChild("sleitnick_net@0.2.0")
                    :WaitForChild("net")
    
    if state then
        local args = {105} -- ID tank
        Net:WaitForChild("RF/EquipOxygenTank"):InvokeServer(unpack(args))
    else
        Net:WaitForChild("RF/UnequipOxygenTank"):InvokeServer()
    end
end)

-- Bypass Radar Toggle
LeftGroupBox:AddToggle("BypassRadar", {
    Text = "Bypass Radar",
    Default = false,
})
Toggles.BypassRadar:OnChanged(function(state)
    Window.AlwayShowTab = state

    local args = { state }
    local remoteFunc = game:GetService("ReplicatedStorage")
        :WaitForChild("Packages")
        :WaitForChild("_Index")
        :WaitForChild("sleitnick_net@0.2.0")
        :WaitForChild("net")
        :WaitForChild("RF/UpdateFishingRadar")
    remoteFunc:InvokeServer(unpack(args))
end)

-- Black Screen Toggle
LeftGroupBox:AddToggle("BlackScreen", {
    Text = "Black Screen",
    Default = false,
})
Toggles.BlackScreen:OnChanged(function(state)
    local player = game.Players.LocalPlayer
    local playerGui = player:WaitForChild("PlayerGui")
    local darkGui = playerGui:FindFirstChild("DarkScreenGUI")

    local lighting = game:GetService("Lighting")
    local originalLightingSettings = {
        GlobalShadows = lighting.GlobalShadows,
        Brightness = lighting.Brightness,
        FogEnd = lighting.FogEnd,
        ClockTime = lighting.ClockTime
    }
    local originalParticles = {}
    for _, v in pairs(workspace:GetDescendants()) do
        if v:IsA("ParticleEmitter") or v:IsA("Trail") or v:IsA("Smoke") then
            originalParticles[v] = v.Enabled
        end
    end

    if state then
        if not darkGui then
            darkGui = Instance.new("ScreenGui")
            darkGui.Name = "DarkScreenGUI"
            darkGui.ResetOnSpawn = false
            darkGui.IgnoreGuiInset = true
            darkGui.Parent = playerGui

            local darkFrame = Instance.new("Frame")
            darkFrame.Name = "DarkFrame"
            darkFrame.Size = UDim2.new(1, 0, 1, 0)
            darkFrame.Position = UDim2.new(0, 0, 0, 0)
            darkFrame.BackgroundColor3 = Color3.new(0, 0, 0)
            darkFrame.BackgroundTransparency = 0
            darkFrame.BorderSizePixel = 0
            darkFrame.Parent = darkGui
        end

        lighting.GlobalShadows = false
        lighting.Brightness = 0
        lighting.FogEnd = 100000
        lighting.ClockTime = 12

        for particle, _ in pairs(originalParticles) do
            particle.Enabled = false
        end
    else
        if darkGui then
            darkGui:Destroy()
        end

        lighting.GlobalShadows = originalLightingSettings.GlobalShadows
        lighting.Brightness = originalLightingSettings.Brightness
        lighting.FogEnd = originalLightingSettings.FogEnd
        lighting.ClockTime = originalLightingSettings.ClockTime

        for particle, enabled in pairs(originalParticles) do
            if particle.Parent then
                particle.Enabled = enabled
            end
        end
    end
end)

-- Boost FPS Button
LeftGroupBox:AddButton({
    Text = "Boost FPS",
    Func = function()
        local Lighting = game:GetService("Lighting")
        local Workspace = game:GetService("Workspace")
        local Terrain = Workspace:FindFirstChildOfClass("Terrain")

        -- Lighting Optimization
        Lighting.GlobalShadows = false
        Lighting.FogEnd = 1e10
        Lighting.Brightness = 1
        Lighting.ExposureCompensation = 0
        Lighting.EnvironmentDiffuseScale = 0
        Lighting.EnvironmentSpecularScale = 0
        Lighting.OutdoorAmbient = Color3.fromRGB(128,128,128)
        Lighting.ShadowSoftness = 0
        Lighting.ColorShift_Bottom = Color3.new(0,0,0)
        Lighting.ColorShift_Top = Color3.new(0,0,0)

        -- Terrain Optimization
        if Terrain then
            Terrain.WaterWaveSize = 0
            Terrain.WaterWaveSpeed = 0
            Terrain.WaterReflectance = 0
            Terrain.WaterTransparency = 1
            sethiddenproperty(Terrain, "Decoration", false)
        end

        -- Disable Visual Effects (Bloom, Blur, SunRays, dll)
        for _, v in pairs(Lighting:GetChildren()) do
            if v:IsA("BloomEffect") or v:IsA("BlurEffect") or v:IsA("SunRaysEffect") or v:IsA("ColorCorrectionEffect") or v:IsA("DepthOfFieldEffect") then
                v.Enabled = false
            end
        end

        -- Mass Disable Visuals (tanpa hapus animasi/suara)
        pcall(function()
            for _, obj in pairs(Workspace:GetDescendants()) do
                if obj:IsA("ParticleEmitter") or obj:IsA("Trail") or obj:IsA("Fire") or obj:IsA("Smoke") or obj:IsA("Sparkles") or obj:IsA("Explosion") then
                    obj.Enabled = false
                elseif obj:IsA("Decal") or obj:IsA("Texture") then
                    obj.Transparency = 1
                elseif obj:IsA("MeshPart") or obj:IsA("UnionOperation") or obj:IsA("Part") then
                    obj.Material = Enum.Material.SmoothPlastic
                    obj.Reflectance = 0
                end
            end
        end)

        -- Rendering Quality to Lowest
        settings().Rendering.QualityLevel = Enum.QualityLevel.Level01

        -- Optimize Camera
        for _, cam in pairs(Workspace:GetDescendants()) do
            if cam:IsA("Camera") then
                cam.FieldOfView = 70
            end
        end

        -- Garbage Clean
        collectgarbage("collect")
    end
})


-- Hide Username & Level Toggle
LeftGroupBox:AddToggle("HideUsernameLevel", {
    Text = "Hide Username & Level",
    Default = false,
})
Toggles.HideUsernameLevel:OnChanged(function(state)
    local charactersFolder = workspace:WaitForChild("Characters")
    local savedTexts = {}

    local function setLabelText(character, text)
        local hrp = character:FindFirstChild("HumanoidRootPart")
        if not hrp then return end

        local levelLabel = hrp:FindFirstChild("Overhead")
            and hrp.Overhead:FindFirstChild("LevelContainer")
            and hrp.Overhead.LevelContainer:FindFirstChild("Label")

        if levelLabel and levelLabel:IsA("TextLabel") then
            if not savedTexts[character] then savedTexts[character] = {} end
            if not savedTexts[character].LevelLabel then
                savedTexts[character].LevelLabel = levelLabel.Text
            end
            levelLabel.Text = text
        end

        local headerLabel = hrp:FindFirstChild("Overhead")
            and hrp.Overhead:FindFirstChild("Content")
            and hrp.Overhead.Content:FindFirstChild("Header")

        if headerLabel and headerLabel:IsA("TextLabel") then
            if not savedTexts[character] then savedTexts[character] = {} end
            if not savedTexts[character].HeaderLabel then
                savedTexts[character].HeaderLabel = headerLabel.Text
            end
            headerLabel.Text = text
        end
    end

    if state then
        for _, character in pairs(charactersFolder:GetChildren()) do
            setLabelText(character, "NexaHub")
        end

        charactersFolder.ChildAdded:Connect(function(character)
            task.wait(1)
            setLabelText(character, "NexaHub")
        end)
    else
        for character, texts in pairs(savedTexts) do
            if texts.LevelLabel then
                local levelLabel = character:FindFirstChild("HumanoidRootPart")
                    and character.HumanoidRootPart:FindFirstChild("Overhead")
                    and character.HumanoidRootPart.Overhead:FindFirstChild("LevelContainer")
                    and character.HumanoidRootPart.Overhead.LevelContainer:FindFirstChild("Label")
                if levelLabel and levelLabel:IsA("TextLabel") then
                    levelLabel.Text = texts.LevelLabel
                end
            end

            if texts.HeaderLabel then
                local headerLabel = character:FindFirstChild("HumanoidRootPart")
                    and character.HumanoidRootPart:FindFirstChild("Overhead")
                    and character.HumanoidRootPart.Overhead:FindFirstChild("Content")
                    and character.HumanoidRootPart.Overhead.Content:FindFirstChild("Header")
                if headerLabel and headerLabel:IsA("TextLabel") then
                    headerLabel.Text = texts.HeaderLabel
                end
            end
        end
    end
end)

-- Reduce Lag Button
LeftGroupBox:AddButton({
    Text = "Reduce Lag",
    Func = function()
        local Players = game:GetService("Players")
        local Workspace = game:GetService("Workspace")
        local Lighting = game:GetService("Lighting")
        local LocalPlayer = Players.LocalPlayer

        Lighting.GlobalShadows = false
        Lighting.FogEnd = 9e9
        Lighting.Brightness = 1
        Lighting.OutdoorAmbient = Color3.fromRGB(128,128,128)
        Lighting.ExposureCompensation = 0
        Lighting.ShadowSoftness = 0

        for _, obj in pairs(Workspace:GetDescendants()) do
            if obj:IsA("ParticleEmitter") or obj:IsA("Trail") or obj:IsA("Explosion") then
                obj.Enabled = false
            elseif obj:IsA("Decal") or obj:IsA("Texture") then
                obj.Transparency = 1
            end
        end

        for _, gui in pairs(LocalPlayer:WaitForChild("PlayerGui"):GetDescendants()) do
            if gui:IsA("TextLabel") or gui:IsA("TextButton") then
                gui.TextScaled = false
            elseif gui:IsA("ImageLabel") or gui:IsA("ImageButton") then
                gui.ImageTransparency = 0.5
            end
        end
    end
})

-- Anti Lava Toggle
local RunService = game:GetService("RunService")
local volcanoFolder = workspace.Zones["Kohana Volcano"]

local AutoRemove = false
local connection

LeftGroupBox:AddToggle("AntiLavaToggle", {
    Text = "Anti Lava",
    Default = false,
})
Toggles.AntiLavaToggle:OnChanged(function(state)
    AutoRemove = state

    if AutoRemove then
        connection = RunService.Heartbeat:Connect(function()
            for _, obj in ipairs(volcanoFolder:GetDescendants()) do
                if obj:IsA("TouchTransmitter") then
                    obj:Destroy()
                end
            end
        end)
    else
        if connection then
            connection:Disconnect()
            connection = nil
        end
    end
end)

LeftGroupBox:AddButton({
    Text = "Destroy Window",
    Func = function()
        local CoreGui = game:GetService("CoreGui")
        local Players = game:GetService("Players")
        local LocalPlayer = Players.LocalPlayer

        -- Remove old confirmation GUI if it exists
        if CoreGui:FindFirstChild("ConfirmDestroyGUI") then
            CoreGui.ConfirmDestroyGUI:Destroy()
        end

        -- Create confirmation GUI (directly in CoreGui)
        local ScreenGui = Instance.new("ScreenGui")
        ScreenGui.Name = "ConfirmDestroyGUI"
        ScreenGui.ResetOnSpawn = false
        ScreenGui.Parent = CoreGui

        -- Main frame
        local Frame = Instance.new("Frame")
        Frame.Size = UDim2.new(0, 260, 0, 140)
        Frame.Position = UDim2.new(0.5, -130, 0.5, -70)
        Frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
        Frame.BorderSizePixel = 0
        Frame.Active = true
        Frame.Draggable = true
        Frame.Parent = ScreenGui

        local UICorner = Instance.new("UICorner")
        UICorner.CornerRadius = UDim.new(0, 10)
        UICorner.Parent = Frame

        -- Title
        local Title = Instance.new("TextLabel")
        Title.Text = "Confirmation"
        Title.Size = UDim2.new(1, 0, 0, 30)
        Title.BackgroundTransparency = 1
        Title.TextColor3 = Color3.fromRGB(255, 255, 255)
        Title.Font = Enum.Font.GothamBold
        Title.TextSize = 20
        Title.Parent = Frame

        -- Message
        local Message = Instance.new("TextLabel")
        Message.Text = "Do you want to destroy all Obsidian and WebhookGUI windows?"
        Message.Size = UDim2.new(1, -20, 0, 40)
        Message.Position = UDim2.new(0, 10, 0, 40)
        Message.BackgroundTransparency = 1
        Message.TextColor3 = Color3.fromRGB(230, 230, 230)
        Message.Font = Enum.Font.Gotham
        Message.TextSize = 16
        Message.TextWrapped = true
        Message.Parent = Frame

        -- Yes Button
        local YesButton = Instance.new("TextButton")
        YesButton.Text = "Yes"
        YesButton.Size = UDim2.new(0, 100, 0, 30)
        YesButton.Position = UDim2.new(0.1, 0, 1, -40)
        YesButton.BackgroundColor3 = Color3.fromRGB(0, 170, 85)
        YesButton.TextColor3 = Color3.fromRGB(255, 255, 255)
        YesButton.Font = Enum.Font.GothamBold
        YesButton.TextSize = 16
        YesButton.Parent = Frame

        local YesCorner = Instance.new("UICorner")
        YesCorner.CornerRadius = UDim.new(0, 6)
        YesCorner.Parent = YesButton

        -- No Button
        local NoButton = Instance.new("TextButton")
        NoButton.Text = "No"
        NoButton.Size = UDim2.new(0, 100, 0, 30)
        NoButton.Position = UDim2.new(1, -110, 1, -40)
        NoButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
        NoButton.TextColor3 = Color3.fromRGB(255, 255, 255)
        NoButton.Font = Enum.Font.GothamBold
        NoButton.TextSize = 16
        NoButton.Parent = Frame

        local NoCorner = Instance.new("UICorner")
        NoCorner.CornerRadius = UDim.new(0, 6)
        NoCorner.Parent = NoButton

        -- Button actions
        YesButton.MouseButton1Click:Connect(function()
            -- Delete all Obsidian GUIs from CoreGui
            for _, v in pairs(CoreGui:GetDescendants()) do
                if v.Name == "Obsidian" then
                    v:Destroy()
                end
            end

            -- Delete ALL WebhookGUI from PlayerGui
            if LocalPlayer:FindFirstChild("PlayerGui") then
                for _, gui in pairs(LocalPlayer.PlayerGui:GetChildren()) do
                    if gui.Name == "WebhookGUI" then
                        gui:Destroy()
                    end
                end
            end

            print("All Obsidian and WebhookGUI windows have been deleted!")
            ScreenGui:Destroy()
        end)

        NoButton.MouseButton1Click:Connect(function()
            ScreenGui:Destroy()
        end)
    end
})


local RightGroupBox = Tabs.Player:AddRightGroupbox("Webhook", "webhook")

--========================================================--
-- TOGGLE SHOW/HIDE GUI
--========================================================--

RightGroupBox:AddToggle("ShowWebhookGUI", {
	Text = "Show Webhook Gui",
	Default = false, -- âŒ GUI tidak langsung aktif
})

local player = game.Players.LocalPlayer
local gui = player:WaitForChild("PlayerGui"):FindFirstChild("WebhookGUI")

if gui then
	gui.Enabled = false -- Tidak langsung tampil
else
	warn("âš ï¸ WebhookGUI belum ditemukan saat inisialisasi!")
end

Toggles.ShowWebhookGUI:OnChanged(function(state)
	local player = game.Players.LocalPlayer
	local gui = player:WaitForChild("PlayerGui"):FindFirstChild("WebhookGUI")
	if gui then
		gui.Enabled = state
		print("Webhook GUI visible:", state)
	else
		warn("âš ï¸ WebhookGUI belum ditemukan!")
	end
end)


local LeftGroupBox = Tabs.Tp:AddLeftGroupbox("Islands", "tree-palm")

local islands = {
    ["Kohana"] = CFrame.new(-642.243561, 16.0354481, 624.918884, 0.999580681, 0, -0.0289562326, 0, 1, 0, 0.0289562326, 0, 0.999580681),
    ["Winter Fest"] = CFrame.new(1687.93079, 6.8625145, 3309.67725, 0.96799022, -3.6394315e-08, -0.250987828, 1.06909646e-08, 1, -1.0377223e-07, 0.250987828, 9.77672059e-08, 0.96799022),
    ["Lost Isle"] = CFrame.new(-3660.07031, 26.1918774, -933.131897, -0.77232331, -7.22959044e-08, -0.635229647, -1.90984206e-08, 1, -9.05904614e-08, 0.635229647, -5.7833244e-08, -0.77232331),
    ["Isoteric Island"] = CFrame.new(2029.47913, 27.3972206, 1393.52319, 0.438848287, -3.30229497e-08, -0.89856118, 8.09404801e-08, 1, 2.55982613e-09, 0.89856118, -7.34489944e-08, 0.438848287),
    ["Crater Island"] = CFrame.new(973.268372, 7.36203814, 4879.09277, 0.99999994, -1.67766032e-08, -0.000279307278, 1.67553038e-08, 1, -7.62482344e-08, 0.000279307278, 7.62435519e-08, 0.99999994),
    ["Coral Reefs"] = CFrame.new(-3134.98511, 20.9564934, 2167.80566, 0.610140502, 5.54546098e-08, -0.792293251, -1.07331415e-08, 1, 6.17270004e-08, 0.792293251, -2.91583468e-08, 0.610140502),
    ["Kohana Volcano"] = CFrame.new(-525.122925, 24.0000591, 187.470749, 0.702778041, -1.4945584e-08, 0.711409211, 1.59372149e-09, 1, 1.18378477e-08, -0.711409211, -1.17821113e-08, 0.702778041),
    ["Fisherman Island"] = CFrame.new(33.5687256, 17.0335217, 2834.95557, 0.999833524, -8.21432367e-10, 0.0182459373, 2.40968401e-09, 1, 8.70248726e-08, -0.0182459373, 8.7054351e-08, 0.999833524),
    ["Esoteric Depths"] = CFrame.new(3152.74707, -1302.72986, 1438.05444, 0.442518562, -2.42594727e-08, -0.896759331, -8.6126515e-09, 1, 1.33023953e-08, 0.896759331, -2.15753335e-08, 0.442518562),
    ["Tropical Grove"] = CFrame.new(-2046.1554, 6.26801682, 3660.56006, -0.739083588, 1.74285066e-08, 0.673613727, -5.79817758e-08, 1, -8.94902854e-08, -0.673613727, -1.05198126e-07, -0.739083588),
    ["Treasure Room"] = CFrame.new(-3599.53491, -266.57373, -1566.98657),
    ["Weather Machine"] = CFrame.new(-1525.72632, 6.49999952, 1892.23645, 0.0615941137, 6.608282509e-10, -0.998101294, -6.8356556e-08, 1, 3.55628549e-09, 0.998101294, 6.84458072e-08, 0.0615941137),
    ["Sisyphus Statue"] = CFrame.new(-3692.22021, -135.574417, -1026.96167, -0.928567886, 9.83784361e-08, 0.371162564, 1.22746741e-07, 1, 4.20307664e-08, -0.371162564, 8.45874197e-08, -0.928567886),
    ["Ancient Jungle"] = CFrame.new(1275.54553, 7.85804176, -193.749756, 0.924119413, 5.65956171e-08, -0.382103801, -3.36512187e-08, 1, 6.67302302e-08, 0.382103801, -4.88084417e-08, 0.924119413),
    ["Underground Cellar 1"] = CFrame.new(1954.18994, -41.7413597, -577.574768, -0.817980289, 0.573605001, 0.0434255376, 0.572797239, 0.81913203, -0.0304316022, -0.0530269668, -1.84206292e-05, -0.998593211),
    ["Underground Cellar 2"] = CFrame.new(2120.27417, -93.1985779, -701.552185, -0.998591185, 0, 0.0530693457, 0, 1, 0, -0.0530693457, 0, -0.998591185),
    ["Second Enchant Altar"] = CFrame.new(1478.29846, 126.044891, -613.519653, -0.117893577, 0, 0.993026376, 0, 1, 0, -0.993026376, 0, -0.117893577),
    ["Mysterious Door"] = CFrame.new(1899.19629, 13.3589745, -577.593811, -0.0531117916, 0, -0.998588562, 0, 1, 0, 0.998588562, 0, -0.0531117916),
    ["Temple Lever 1"] = CFrame.new(1485.66541, 5.41373634, -861.165161, -5.01871109e-05, 0.988927424, 0.148400292, -1, -5.01871109e-05, -3.74019146e-06, 3.74019146e-06, -0.148400292, 0.988927364),
    ["Temple Lever 2"] = CFrame.new(898.490479, 5.41373587, -361.212708, 9.11951065e-06, 0.0998446345, -0.995003104, -1, 9.11951065e-06, -8.2552433e-06, 8.2552433e-06, 0.995003104, 0.0998445749),
    ["Temple Lever 3"] = CFrame.new(1419.39148, 28.1637344, 79.5802917, 3.55243683e-05, -0.332731277, -0.943021655, -1, -3.55243683e-05, -2.51233578e-05, -2.51233578e-05, 0.943021655, -0.332731247),
    ["Temple Lever 4"] = CFrame.new(1818.72156, 5.41373634, -285.160828, -1.15633011e-05, -0.192806393, 0.981236815, -1, 1.15633011e-05, -9.53674316e-06, -9.53674316e-06, -0.981236815, -0.192806482),
    ["Temple"] = CFrame.new(1478.09546, 0.0774269104, -612.817993, 0.993017375, 0, 0.117968373, 0, 1, 0, -0.117968373, 0, 0.993017375),
    ["Mount Hallow"] = CFrame.new(1840.72021, 33.7589836, 3116.54443, -0.996191859, 0, -0.0871884301, 0, 1, 0, 0.0871884301, 0, -0.996191859),
	["Crystal Cavern 1"] = CFrame.new(-1553.69409, -360.835022, 6960.74805, 0, 0, -1, 1, 0, 0, 0, -1, 0),
	["Crystal Cavern 2"] = CFrame.new(2342.47388, 186.970016, 3078.82715, 0.951068401, 0, 0.308980465, 0, 1, 0, -0.308980465, 0, 0.951068401),
}

-- Ambil semua nama Island
local islandNames = {}
for name, _ in pairs(islands) do
    table.insert(islandNames, name)
end
table.sort(islandNames, function(a, b) return a:lower() < b:lower() end)

-- Default Island
local selectedIsland = islandNames[1] or "Kohana"

-- Buat dropdown di Groupbox (misal Groupbox = Tabs.Teleport)
LeftGroupBox:AddDropdown("MyDropdown", {
    Values = islandNames,
    Default = selectedIsland,
    Multi = false,
    Text = "Select Island",
    Searchable = true,
    Callback = function(value)
        selectedIsland = value
    end,
})

-- Buat button teleport
LeftGroupBox:AddButton({
    Text = "Teleport Now",
    Func = function()
        local player = game.Players.LocalPlayer
        local char = player.Character or player.CharacterAdded:Wait()
        local hrp = char:WaitForChild("HumanoidRootPart")

        local target = islands[selectedIsland]
        if target then
            char:PivotTo(target)
        end
    end,
})

local RightGroupBox = Tabs.Tp:AddRightGroupbox("Position", "folder")

-- Variabel global
local savedCFrame = nil
local teleportEnabled = false

-- Button Save Position
RightGroupBox:AddButton({
    Text = "Save Position",
    Func = function()
        local player = game.Players.LocalPlayer
        local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
        if hrp then
            savedCFrame = hrp.CFrame -- simpan CFrame lengkap (posisi + arah)
            Library:Notify({
                Title = "Saved",
                Description = "Position saved successfully!",
                Time = 4,
            })
        else
            Library:Notify({
                Title = "Error",
                Description = "Character not ready!",
                Time = 4,
            })
        end
    end
})

-- Fungsi Freeze dan kembalikan ke posisi
local function freezeCharacter()
    local player = game.Players.LocalPlayer
    local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    if not hrp or not savedCFrame then return end

    -- BodyVelocity & BodyGyro
    local bv = Instance.new("BodyVelocity")
    bv.MaxForce = Vector3.new(1e5,1e5,1e5)
    bv.Velocity = Vector3.new(0,0,0)
    bv.Parent = hrp

    local bg = Instance.new("BodyGyro")
    bg.MaxTorque = Vector3.new(1e5,1e5,1e5)
    bg.CFrame = savedCFrame
    bg.Parent = hrp

    -- Loop freeze & check distance
    spawn(function()
        while teleportEnabled and hrp and hrp.Parent do
            local distance = (hrp.Position - savedCFrame.Position).Magnitude
            if distance > 2 then
                hrp.CFrame = savedCFrame
            end
            task.wait(0.1)
        end
        -- Hapus BV & BG saat toggle dimatikan
        if bv then bv:Destroy() end
        if bg then bg:Destroy() end
    end)
end

-- Toggle Teleport + Freeze
RightGroupBox:AddToggle("TeleportToSavedPos", {
    Text = "Teleport to Saved Position",
    Default = false,
})

Toggles.TeleportToSavedPos:OnChanged(function(state)
    teleportEnabled = state
    if teleportEnabled then
        freezeCharacter()
    end
end)
